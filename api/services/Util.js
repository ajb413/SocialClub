module.exports = {

	//Creates a brand new guid
	//credit: Slavik Meltser @ http://slavik.meltser.info/the-efficient-way-to-create-guid-uuid-in-javascript-with-explanation/
	newGuid : function ()
	{
		function _p8(s) {
			var p = (Math.random().toString(16)+"000000000").substr(2,8);
			return s ? "-" + p.substr(0,4) + "-" + p.substr(4,4) : p ;
		}
		return _p8() + _p8(true) + _p8(true) + _p8();
	},

	//check if a member in the model already has the specified attribute
	//rejects if member is found or error occurs, resolves if not found
	// model - the model to query
	// findParameter - JSON object passed to findOne method
	alreadyInModel : function (model, findParameter) 
	{
		var deffered = sails.Q.defer();

		model.findOne(findParameter)
		.then(function (found)
		{
			if (!found)
			{
				deffered.resolve();
			}
			else
			{
				deffered.reject("Model already contains: " + findParameter);
			}
		})
		.catch(function (err)
		{
			deffered.reject("Model search error for: " + findParameter);
		});

		return deffered.promise;
	},

	//check if proposed object is in the model
	//resolves if object is found and returns it, rejects if object is not found or error occurs
	// model - the model to query
	// findParameter - JSON object passed to findOne method
	existsInModel : function (model, findParameter) 
	{
		var deffered = sails.Q.defer();

		model.findOne(findParameter)
		.then(function (found)
		{
			if (!found)
			{
				deffered.reject(findParameter + " not found");
			}
			else
			{
				deffered.resolve(found);
			}
		})
		.catch(function (err)
		{
			deffered.reject(err);
		});

		return deffered.promise;
	},

	//base64 png of the default avatar
	DefaultAvatar : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAF6dJREFUeNrtnXlwVOeZ7n9n6VartbZaEtpQSwjpIgQIJEtgOSwGF5Mhg50hisfYE7vuOJ47Y3tu+ZZzq1LXU44rU/NXxlkqFTsQTyrOjD1mbBwGO4lhrsHY2BhhC0kY7UiAhNCK1C211Ov55o8jyWzd6lVkAk9VFzacc/o77/Mt7/e87/e2JIQQ3MEtg3yrG3C74w4Btxh3CLjFuEPALcZtSIAA4QP8t7ohAKi3ugGLDm0GXKdBOMG0FpQsQLplzbn9CPAPgf0lcDVC0p9C8p+BqRrktFvSnNuPAO9FmDkF3i7w9sL0UUjeqZNhWgtS4qI25/YiQJsGdwv4h/X/F25wN4GnSydibkQY/wdICYvSpNuMgHGY+QTE9LV/L5wwcxzcX8D0EUi+H5J2gGFp3Im4vQjw9oH7DAjvzf9dm9AJcJ8B52FI+QaYt4KaB5IhLk26fQgQM+A6qS/CwS/UpyjnIX16SjwEKfWQWAdqDrH23ONOgBACTdPwer34/X40TUOWZVRVRVVVFEWJdxN0aA59+tEmQrzBB75LMPU2uD4F83ZIfgAS14OSGbNmSbFWQ4UQuN1uhoeH6e3tpaOjg7GxMdxuNx6PByEEsixjNBpJSEjAarVSXFyMzWYjJyeHpKQkZDnW+0MBM5/C0N/oi3BEMIBxGSR9DZK/BqYakJOJdg8RsxEghMDhcNDY2MjRo0dpb2+nt7eXzs5OpqenA96XlJREcXExhYWF2Gw26urquOeee8jNzUVVY9Q84QNXA/guR/EQL3g6wHsepj+ApD/RF+uESpBNREpETEaAy+WiubmZffv28cEHH9DR0RHU6IGgKAqFhYXU1taya9cu7r33XqxWa/Qjwn8Fhp8Bx+vETIKQk3TjJ+3QpyZjSUR7iKgJmJiY4J133mHPnj2cPn06IsNfD1VVKSws5IEHHuCJJ56grKwsirVCwMwJnYCZU7FXHRQLJKyD5K/ro8JgC8t1jYoAh8PB66+/zk9+8hM6OjqIdXAtLS2NXbt28Z3vfIfy8nIkKQLrCR9MvARj/wD+0Zi270vI+sJsWj/rum4CtSAk1zXise3xePj973/Pz372s7gYH8But7N//3727NnDwMBAZA/RxsHVrE9DcYM267r+Hka+q5Pt/gJY2CYRE9Dc3MzevXs5e/ZsUONLkoSiKKiqisFgwGAwzLugocztDoeDN998k4MHDzIzMxN+Q93t4PlCN1Lc4dNHmW9AlzlCQERuxuTkJO+99x4NDQ1BjZ+QkMCKFSvYuHEjeXl5GI1GvZk+Hw6Hg7a2NhoaGhgcHMTvD7w4Dg4O8tZbb7Fp0yYqKirCaKkGnlZd61kUKJBYA5ZndIU1hAUnIgLOnz/Pxx9/jNPpDHhNamoqu3bt4pFHHmHt2rVYLJb5Hi+EYGZmhoGBAU6dOsUvf/lLPvzwQ7zem0sEQgg6Ojr49NNPKSsrw2AIURbwjep+v+aIr90BkCGhAizPgvnekKWLiKagzs5Ozpw5E7D3GwwGduzYwbPPPsu2bdvIzMxEURQkSUKSJGRZJikpidLSUh588EFeeOEFNm/eHNTvHxkZ4eTJk0xNTYXeUG8vuD5nUaYf43K95yd9NSwvKGwCfD4fw8PDTExMBLwmMzOTnTt3huS5qKrKhg0bePLJJykuLg54ncfj4eLFi0G/9xoIP3jawNNJKIthVFALIe0pSP5zfX8QBsImQAgx/wmE3NxcbDZbyL67qqrU1NRQWloalDCfzxd0rbgG/hGYOQkijBETCZQcSP9rSHsIlPSwbw97DQjFF3c4HNjt9rCem5KSQkVFBV+c+QK3x40kSfMkS5KEx+NBluXQPSHfJV1+CCQ9xwJKJqQ9pn+U7IgeEbHYEmwEXLp0iQMHDlBaWkpJSUlI7qbZbGb37t2sW7fupr3c5/ORkpJCZmYISqTwgqcdfBcjfb2FIadByoOQ/gSo+RE/JiICFpKRZ2ZmePPNNxkbG+Nb3/oW1dXVZGRkkJiYGJAMg8HAunXrWLduXfAvF179E8zL0CZ0+UGL0/QjmXVFNP1JMCwjGn0jbAJUVcVms1FQUEBHR0fA6+Y0oqamJsrKytiyZQvV1dXk5eVhtVpJT08nISHccJ9/VtUc0v1sNRck442X+YZmpx9XrEz+JSSjHiWzPAMJ5dwSObq8vJza2lq6urrQtMAuntfrpaenhwsXLtDQ0EBqaippaWmsX7+empoaCgsLycvLIy8vj9TU1IXlZ98IOPbB1DtgqoKUr+v6i6HoSyKER49keS/F3vgoemQs4//q3x+D6FhEYpzP52Pfvn0899xzXLhwIewvNZlMJCYmkpCQQGlpKXfffTfFxcXk5+dTVlZGQUEBSUk3cedmTsDw38369iooGToByX+mG8ZYqidejX4X7K/GeATIehAm83tgvi9mMeKI1dChoSF+/OMfs2fPHsbHxyN/rdnwpKIoWCwWampqWL16NbW1tdTV1ZGRkaF7XsIHjtd0WfmasKKsu3+mWl0OVpbAlX8Cd2PsbI8ECavB+vd6ECaGmRLKCy+88EIkNyYlJVFYWMjU1BS9vb2RCWXo3pTf78fn8zE5OUlXVxeffPIJn332Gb29vSQmJpKTm4dBHgfHv+nx2Wt2tkIPuHvP6X6/+3PwndenoljBUKpLDCkPgGyO3XOJggBJksjIyKC8vJzk5GQuXLiA0+kMfaMUAHNB/LGxMZqamjh79iyqaqQo34vZ82vw9QW52aWrkbE0vmoDy99B6m5QYp++GDEB8CUJq1evpqKiAkVRmJqawu/34/FEbwRN0xgYuMy5c20UZPRQlvs5qhKazBsb6+SA5QlI+5+gxi4T4mrEJOptsVj46le/SlVVFe3t7XzwwQd8/PHHDAwMMDQ0xMTERBQBG8HoUDf2yxcRWgx79kJQrJD6CKT+FahL4vY1McuKUFWVvLw8cnJyqK2tZXR0lO7ubk6ePMnp06cZGRnh0qVL9Pf343aH14ut6YLVZW4SDMRdVwNAToHkb0D63+jpiXFEzPOCrsZcQtbU1BSXL1+mtbWVpqYm+vr66Onp4ezZs0xNTaFpWmBpW4X7t8KP/x4KcoidsiynAfJsrOCqdUsy6QF263O6vh/nswNxJeB6zBFit9s5d+4czc3NtLW1ceTIETo6Om4akElNhuefgv/1ECSbic0IkNMg9S/0bAZXI7hOgKcX8Os+fubzYLqLxTi4ERYBmqbhcrmCzueqqmI0GkNSTTVNY3x8nKamJn7729/y9ttvc/HixWuev6wAfvGPsHUDMZp+JN3I2T/QfXvfkJ5w5fpc/++U+/VN3SKd3gprDbhy5QoHDx5kaChwgmtFRQVbt24lOTl5wefJsozVamXbtm2sWrWKkpISfvjDH9Lb24sQAkWGyhVQlK/bLSYEqEsh9SEwlgMyqLloSg7CUI0QM0hKOrKQiSQDJqLmhHOxy+XiyJEjHDp0KKC/v2vXLmpqakIi4GosWbKEBx98kP7+fn7605/idDoxGqBmNWRbidHUY0IkbWNKfIWR3n6GhoZwOBxMT0/j8XgRAhRFmpdKMiwZLMlZgtVqxWQy3XoCDAYDZrOZycnJgJ5Mb28vQ0ND5Obmht0Yq9VKdXU1JpMJp9PJEqs+ApKTiMHiKzFit/LRSRNne/6NpuYWWlpacDgcNzgBc6k0uTm5VFVXUVFRQXl5OWvWrCE3NzemycNhEaAoSlBNH6C9vZ2GhgZWrlw5n4YSKuZ2wXNYswKWFcbgLSWYdEq8ut/Jj371a0av+PD7Fw5vDg8P88XZL+Zd7HvvvZft27ezefNmsrOzI8vUuw5hEZCYmEhxcTFGozGg9jM4OMgbb7xBZWUl69evD6sxdrudlpYWXC4XBlXv/QU5RD39aH44/pnGq/vtDAyG/jAhBD6fD5/PNy+rHz16lO3bt/PYY49RVVUVdie7HmFJEQaDAafTyZEjRwIqoEIIBgcHcTqdFBUVkZGREVKaud1u55133uGVV17h8uXLLM2Fb30d1q6MkgAJ+gbhJ7+GDz8DfxRTmRCC8fFxzpw5Q3d3NykpKdhstqhICIuAubmxs7OTtra2gMGYuR7T3NyMJEnz05Ysy/PD1u/343K5mJiYoLOzk9dee409e/bQ0dGBpmlsWAuP7ITsjOiM7/LAv/8OfvUbsE9G8ayr4Pf7uXjxIp2dnWRkZFBaWhp6sth1CFuKyMvL4/777+fEiRP09PQEvG5qaorjx4/T0dHBsmXLuPvuuykrK8NisaCqKm63m7GxMdra2jh58iQ9PT3Y7XY0TcNogIrls+5nlGhphzffg8EYJ0b7/X5aWlp46aWXyMrKYuvWrREdKAn7DoPBwJYtW/jmN7/Jyy+/jMMROO1P0zSGhoYYGRmhubkZo9E4nyGnaQK/34fb7cbtdl/jheRkQWU5JCYS+fQjwfgEHPhPaGiBQHtHWZbJysqaz96bmppicHAwpHMOfr+fU6dO8Ytf/IKlS5dSXl4efwIAsrOzeeSRR+ju7ubdd99dUFzTNI3p6en5l5IkXePx+m5umOJ8WFcOchSbL79fn/N/8//BeZ2/IEkSVquVqqoqysrKWLlyJUVFRRgMBq5cuUJbWxvt7e2cOHGC/v7+oN6S1+vl8OHDrFu3jvz8fFJTU+NPAOg73meeeQa/38/777/P5GRoE6wkwYpl8LXN0Niq907nzJdEJBihojTK6UeCCwPwxm+h+7qQtaIoVFZW8uijj7J161aWLVuGyWS6JnHY7/czPDzMsWPH2L9/P4cOHQqaiDw5OcmBAwfYtm1b2J5fVBGx/Px8KioqMJvN9Pf3Mz09vaBvbUqAXffBs9+Ge6ogNxMmJsExpY+InEz4y/uhehVEtN+RdELf+h28egAmr7KbqqrU1dXx/PPPU19fT35+Pkajcd45mPsoikJqaiorV65k9erVeDweOjo6ggaZpqenKS0tZfXq1WEtyFFFxGRZZsmSJVRWVrJq1SoURWFycjJoRCwtBR6vhw1roSBX9/WrVup/P+GQWFao8lffEOREGIASQFMr/NM/Q8f5a9taU1PD9773Pe67776QcpJkWSY7O5vS0lKuXLlCZ2dnwBR6n8+HyWRi48aNpKenh9zemARkMjMz2bFjB9XV1bS2tnLs2DEaGhoYHR1lamqKyclJ7HY7MzMzFCyB8uVgNAKaLjfXVenT0o7NCi6vmWVLp0AS4c//EoyNwxu/g5bOa9eXoqIinn766QXT4G+G5cuX8/jjj9PV1cXx48cDEtDe3s7g4CA2m21xCQB9eOfn55Obm8uGDRtwOByMjIzQ399PX18f5871MDTUz9riZmx5XYBPv1HoQqfVAhvv8uPXplAVLSLj+/3wYQO8+wFMXeXEGI1Gdu7cGXLPvx6yLFNZWUltbS0nT54MOArsdjt9fX1UVVWFPA3FvFSBLMukpKSQkpJCfn4+a9aswe/34/draH476pXvYpjuvlFcEyBLAlmJfNvb0wf/elD/82rk5eWxZcsWsrMjy2AGPXl48+bNnD9/nvHx8Rt0ICEEaWlpmEymsOLfca8VMbcDNhgAzzBwDohxyrgE0y74j/fho8/1kXD191dXV1NRURGVeCbLMhs3bqSkpAS3231TAhRFYenSpWEtwotYLUWDmcbZ0F8kUPXaDMI7W+/ny14mgM+/gLf/E0avk6hMJhOVlZXk5eVF/QYWiwWLxRJTqyweAdqMfmDONxjBzRIkrNEPQviGwPmefvRITIEMQyPw1iFoarvxTqvVyvLlyzGbY5vRFissHgHe8+A5S0TTj6FIPwiR+rB+9iv5azC5HzF1GJezk2MnPRx8H2ZukoubmppKenp6TLT7eGDxCPC06adWwoWSoRs+ZRfIs9v8xA2QsJIJ7wbeOfAcr+3voj/AwMrKyopq8Y03Fif0r03rR/d9YZYbkEyQtFNPDbzmDJYMcjpjM2v5l9/lcrRBwhdgA64oyuIVhYoAi0OAr1+v1yB8YdykgHkzWOaOAd0MEj6fgs//hzm9hILFIcDbC55mQo+sS3otnvQnIWEtgRKk9OOyGouTrxgfxJ8AbVqvQhiO92OwQfq39bNYUuBwn6IoJJgSkKXArzEXb/hDRfwJ8A/NHpgOMbNZyYCUh/VKhXLw3CKz2UxBQQGqIbAvMTo6ysjISNxfM1LE3wvy9oG7mZBKhUmJkHQ/pD8+W1Q7OAwGA+np6UEXWbvdztjY2Hy1xmjgdDr55JNP6O/vv6lbK8syNpuN9evXh5zIFV8CtGnd+HOlghdqSuKm2ZTwopAen5iYOB/JCoSxsTFaW1txOBxhycQ3w6VLl3jxxRc5duzYfOxgDkIIDAYD9fX1rFq16g+FgAn9ZKNYKL46ewjO8iSY1hHqzGgymSgqKiIpKSlgaQSv10tjYyMXLlyIigAhBBcuXGBgYACX6+anLxVFwWq1hqUFxXcN8A3o/v9C9RrUpXrBC/O2oIvuDY2XZZYuXUpRUVHAna4QgubmZj777LOAMnIo8Hq9tLS0BC2dFsqIvOEdIm7RQhBuPfd+oVLBigXSHtWL3YVZ6gUgPz+f2traoC995coV3nvvvaBpNAuht7eX48ePBz2Sm5yczPLly8OKOcSPAM05W69hIvA1UiIkfR1SHwtp0b0ZrFYrdXV1LFkS+ByX3+/n6NGj7Nu3j9HR8BOEZmZmOHz4MCdOnAiYjCbLMkVFRdhstrAW+/gR4O3X67UFcj8lg77TTf9rvSRwhJBlmbvuuot77rkn6IuPjY3xyiuv8Prrr4d1sNzj8XDs2DHeeOONoO5sYmIiX/nKV4J2hJu2P+I3Dwbhmz0wHahegwTGCkj/29mjQNE1Y+nSpWzfvn1Bzb+vr48XX3yRvXv3cv78+QUzOCYmJjhw4AA/+MEPOHXqVNC6GDabjU2bNoWdFxRVVkRAiGlwvKr/KMLN/H+1CDL+j17yV47+4IMsy2RkZNDT00Nra2tQQ81lYHd2djIxMYHJZEJV1fl8IK/Xi8Ph4PTp0+zdu5e9e/fS2NiIzxdYx0pISGD37t3U19eHfTAlPm6o9yK420Dz3CjjyBl6YCXCRTcQCgoK2L17N2fPnqWpqSloXHZ4eJi33nqL48ePU1ZWRkZGBunp6WRnZzM9PU1/fz/9/f20trYumKIoSRJr167lgQceCK2Y1PUQMYdfCPu/CnHOJkQ71346zEJc/rYQnu7Yf60QYnJyUvz85z8XpaWlQpIkga7ShfSRZVmYzWZhNBrDui8rK0v86Ec/Ek6nM6I2x34NEC5devZe5y9LKpi36IuuoTiiRy+E5ORk6uvrefrpp1m+fHlYUbC5/NVwSiykpqby0EMPUV9fH3nIM+bd0N0qRN+O63q/JERvlRCT7wqheePS+6/G2NiYePnll8WaNWvCHgmhfiwWi3jqqadEV1eX0DQt4rbGngDHfiHOFV9LQHeREON7hdAiG6YRNcPhEPv37xf33XefMJvNMTO8oihixYoV4vvf/764ePFi1O2M7SI8H3q86pcq5ko7pvy5XuxukZCSksLOnTux2WwcPHiQAwcO0NXVhcfjiaikjqqqpKSksG3bNh5++GG2bt1KWlr05WtiW6rA062Xb5/6DaCBlKQfirb+vyBhxfhj7qdVGhsb+eijjzh16tT8fO/xeG7QiPREMgNGoxGDwUBWVhabNm2irq6Ouro6SkpKYhZnji0BzsMw9KRevQpVLwmQ9Q8hVxKPN+YKhvf29s4XDOnu7qazs3P+1KckSWRlZVFWVkZxcfG8vFBUVER2dnbsftdmFrF7mnDpeT9z00/CGrD8bz22+wdgfNDlgpKSEkpKSvB4PExPT+N0OnE6nfh8vnmvKSEhgaSkJBITEzGbzTE3+tWI3ZN9g7OhR/dsItXf6j/lEadfoIsWRqMRo9EYdZAmWsRuH+DrB1eTLi+nPjZb4C52O90/VsSGADGjb740+2wi1aMRy8u3G2JDgH8cXKf0wqaWJ+O20/1jRGwI8A0BQpcZgiRS3cGNiN4NFW6Y/hjEpJ5IJafc6nf6b4UYeEGSnsmmZt0xfgSI0UZMY7HSTP/YECOr3TF+pLhjuVuMOwTcYvwXEJTAQlCzw0QAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMDktMjZUMjM6NTg6NTQrMDA6MDDqlaJTAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE1LTA5LTI2VDIzOjU4OjU0KzAwOjAwm8ga7wAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE0LTA1LTEyIFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ9yG7QAAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADE5Mg8AcoUAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAMTky06whCAAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNDQzMzExOTM0uYLTrAAAAA90RVh0VGh1bWI6OlNpemUAMEJClKI+7AAAAFZ0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL21udGxvZy9mYXZpY29ucy8yMDE1LTA5LTI2L2E2MDYzNzI2ODkwNjM0OWNiYWJmMmI3NzE5NDRjOGRhLmljby5wbmf2mfk4AAAAAElFTkSuQmCC",

}